<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mega Menu System</title>

<style>
/* ================= RESET ================= */
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: Arial, sans-serif; }

/* ================= NAV ================= */
.main-nav {
  display: flex;
  gap: 32px;
  padding: 20px 40px;
  background: #111;
  color: #fff;
  position: relative;
}

.main-nav a,
.nav-item {
  color: #fff;
  text-decoration: none;
  cursor: pointer;
  position: relative;
}

/* ================= MEGA MENU CONTAINER ================= */
.mega-menu {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100vw;
  display: none;
  z-index: 999;
}

.mega-menu.is-active {
  display: block;
}

/* ================= BIG MEGA MENU ================= */
.BigDropDown-Tray {
  display: flex;
  width: 100%;
}

/* LEFT COLUMN */
.processingSolutionDropDown-1st-Level {
  width: 390px;
  min-width: 390px;
  background: #333;
  list-style: none;
}

.processingSolutionDropDown-1st-Level li {
  padding: 15px 20px;
  color: #fff;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  border-bottom: 1px solid rgba(255,255,255,0.15);
}

.processingSolutionDropDown-1st-Level li:hover,
.processingSolutionDropDown-1st-Level li.active {
  background: #444;
}

/* CARET */
.right-caret-desktop-mega-menu {
  width: 18px;
  height: 18px;
  opacity: 0.6;
  transition: transform .25s ease, opacity .25s ease;
}

.processingSolutionDropDown-1st-Level li:hover
.right-caret-desktop-mega-menu {
  opacity: 1;
  transform: translateX(4px);
}

/* RIGHT GRID */
.grid-space-area {
  width: calc(100vw - 390px);
  padding: 32px 48px;
  display: grid;
  gap: 30px;
  grid-template-columns: repeat(3, 1fr);
  background: #efefef;
  border-left: 1px solid #ccc;
}

/* PRODUCT CARD */
.product-grid-item {
  display: flex;
  gap: 1rem;
  text-decoration: none;
  color: #000;
}

.product-image {
  width: 100px;
  height: 100px;
  object-fit: cover;
  background: #ddd;
}

.product-details h3 {
  margin-bottom: 6px;
  font-size: 1rem;
}

.product-details p {
  font-size: .9rem;
}

/* ================= RESPONSIVE ================= */
@media (max-width: 900px) {
  .BigDropDown-Tray {
    flex-direction: column;
  }

  .processingSolutionDropDown-1st-Level,
  .grid-space-area {
    width: 100%;
  }

  .grid-space-area {
    grid-template-columns: repeat(2, 1fr);
  }
}
</style>
</head>

<body>

<!-- ================= NAV ================= -->
<nav class="main-nav">
  <a href="/">Home</a>

  <div class="nav-item js-mega-trigger" data-menu="processing">
    Processing Solutions
  </div>

  <div class="nav-item js-mega-trigger" data-menu="digital">
    Digital Services
  </div>

  <a href="/about">About Us</a>
</nav>

<!-- ================= MEGA MENU ================= -->
<div class="mega-menu js-mega-menu"></div>

<script>
/* ================= DATA ================= */
const processingMenuData = [
  {
    label: "Full service fine dining",
    products: [
      { name:"Union POS", desc:"Manage order, sales, and payments in one place", img:"union.webp", href:"#"},
      { name:"Clover", desc:"Smart POS for fine dining", img:"clover-fd.webp", href:"#"},
      { name:"OctoPOS", desc:"Cloud-based POS platform", img:"octo.webp", href:"#"}
    ]
  },
  {
    label: "QSR and Food Trucks",
    products: [
      { name:"Clover", desc:"Fast POS for QSR", img:"clover-qsr.webp", href:"#"},
      { name:"Swipe Simple", desc:"Food & beverage merchants", img:"swipe.webp", href:"#"},
      { name:"Valor", desc:"Reliable terminals", img:"valor.webp", href:"#"}
    ]
  }
];

/* ================= ELEMENTS ================= */
const megaMenu = document.querySelector(".js-mega-menu");
const triggers = document.querySelectorAll(".js-mega-trigger");

/* ================= BUILD PROCESSING MENU ================= */
function buildProcessingMenu() {
  megaMenu.innerHTML = `
    <div class="BigDropDown-Tray">
      <ul class="processingSolutionDropDown-1st-Level"></ul>
      <div class="grid-space-area"></div>
    </div>
  `;

  const left = megaMenu.querySelector("ul");
  const grid = megaMenu.querySelector(".grid-space-area");

  processingMenuData.forEach((item, i) => {
    const li = document.createElement("li");
    li.textContent = item.label;
    li.dataset.index = i;
    if (i === 0) li.classList.add("active");
    left.appendChild(li);
  });

  injectCarets(left);
  renderGrid(0);

  left.addEventListener("mouseenter", e => {
    if (e.target.tagName !== "LI") return;
    left.querySelectorAll("li").forEach(li => li.classList.remove("active"));
    e.target.classList.add("active");
    renderGrid(e.target.dataset.index);
  }, true);

  function renderGrid(index) {
    grid.innerHTML = "";
    processingMenuData[index].products.forEach(p => {
      grid.innerHTML += `
        <a class="product-grid-item" href="${p.href}">
          <img class="product-image" src="${p.img}" alt="${p.name}">
          <div class="product-details">
            <h3>${p.name}</h3>
            <p>${p.desc}</p>
          </div>
        </a>
      `;
    });
  }
}

/* ================= CARET INJECTION ================= */
function injectCarets(container) {
  container.querySelectorAll("li").forEach(li => {
    if (li.querySelector("svg")) return;
    li.insertAdjacentHTML("beforeend", `
      <svg class="right-caret-desktop-mega-menu" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
      </svg>
    `);
  });
}

/* ================= NAV INTERACTION ================= */
triggers.forEach(trigger => {
  trigger.addEventListener("mouseenter", () => {
    megaMenu.classList.add("is-active");
    if (trigger.dataset.menu === "processing") {
      buildProcessingMenu();
    }
  });
});

document.body.addEventListener("mouseleave", e => {
  if (!e.relatedTarget?.closest(".mega-menu") &&
      !e.relatedTarget?.closest(".main-nav")) {
    megaMenu.classList.remove("is-active");
  }
});
</script>

</body>
</html>
