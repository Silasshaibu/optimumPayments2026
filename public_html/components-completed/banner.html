<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/style-guide.css">
    <link rel="stylesheet" href="../assets/css/banner.css">
    <title>Banner Carousel</title>
    
</head>

<body>

    <!-- ============================================================
        BANNER CAROUSEL
    ============================================================ -->
    <section>
        <div class="banner-carousel">

            <!-- Navigation -->
            <button class="banner-btn banner-prev" aria-label="Previous slide">‹</button>
            <button class="banner-btn banner-next" aria-label="Next slide">›</button>

            <!-- Slides -->
            <div class="banner-wrapper">

                <div class="banner-slide">
                <div class="banner-container">
                    <div class="banner-media">
                    <img class="banner-advert"
                        src="../assets/images/hero/2021-02-03-station-solo-Merchant_Facing-Left_Parallel-Register-np-removebg-preview.webp"
                        alt="Advert">
                    <button class="banner-cta">GET ACCESS NOW</button>
                    </div>
                </div>
                </div>

                <div class="banner-slide">
                <div class="banner-container">
                    <div class="banner-media">
                    <button class="banner-cta">CLAIM OFFER NOW</button>
                    </div>
                </div>
                </div>

            </div>
        
        </div>


        <link rel="stylesheet" href="../assets/css/style-guide.css">
        <link rel="stylesheet" href="../assets/css/banner.css">
    </section>




</body>




<script>
    (function initBannerCarousel() {

  document.querySelectorAll(".banner-carousel").forEach(carousel => {

    const wrapper = carousel.querySelector(".banner-wrapper");
    const slides  = Array.from(wrapper.children);
    const prevBtn = carousel.querySelector(".banner-prev");
    const nextBtn = carousel.querySelector(".banner-next");

    if (slides.length < 2) return;

    const firstClone = slides[0].cloneNode(true);
    const lastClone  = slides[slides.length - 1].cloneNode(true);

    wrapper.prepend(lastClone);
    wrapper.append(firstClone);

    let index = 1;
    let width = slides[0].offsetWidth;
    let isAnimating = false;

    function setPosition(noAnim = false) {
      wrapper.style.transition = noAnim ? "none" : "transform 0.45s ease-in-out";
      wrapper.style.transform = `translateX(-${index * width}px)`;
    }

    function moveTo(newIndex) {
      if (isAnimating) return;
      isAnimating = true;

      index = newIndex;
      setPosition();

      wrapper.addEventListener("transitionend", () => {

        if (index === 0) {
          index = slides.length;
          setPosition(true);
        }

        if (index === slides.length + 1) {
          index = 1;
          setPosition(true);
        }

        isAnimating = false;
      }, { once: true });
    }

    nextBtn?.addEventListener("click", () => moveTo(index + 1));
    prevBtn?.addEventListener("click", () => moveTo(index - 1));

    window.addEventListener("resize", () => {
      width = slides[0].offsetWidth;
      setPosition(true);
    });

    setPosition(true);
  });

})();

</script>


<script>
(function bannerAutoFadeBezier() {

  const AUTO_INTERVAL = 5000;
  const FADE_DURATION = 900; // MUST match CSS opacity duration

  document.querySelectorAll(".banner-carousel").forEach(carousel => {

    const wrapper = carousel.querySelector(".banner-wrapper");
    const slides  = wrapper ? Array.from(wrapper.children) : [];

    if (!wrapper || slides.length < 2) return;

    let index = 0;
    let width = slides[0].offsetWidth;
    let timer = null;

    function setPosition(noAnim = false) {
      wrapper.style.transition = noAnim
        ? "none"
        : "transform 0.45s ease-in-out, opacity 0.6s cubic-bezier(0.4, 0.0, 0.2, 1)";

      wrapper.style.transform = `translateX(-${index * width}px)`;
    }

    function fadeReset() {
      wrapper.classList.add("is-fading");

      setTimeout(() => {
        index = 0;
        setPosition(true);

        requestAnimationFrame(() => {
          wrapper.classList.remove("is-fading");
        });

      }, FADE_DURATION);
    }

    function nextSlide() {
      index++;

      if (index >= slides.length) {
        fadeReset();
        return;
      }

      setPosition();
    }

    function startAuto() {
      timer = setInterval(nextSlide, AUTO_INTERVAL);
    }

    function stopAuto() {
      clearInterval(timer);
    }

    carousel.addEventListener("mouseenter", stopAuto);
    carousel.addEventListener("mouseleave", startAuto);

    window.addEventListener("resize", () => {
      width = slides[0].offsetWidth;
      setPosition(true);
    });

    setPosition(true);
    startAuto();

  });

})();
</script>



</html>
