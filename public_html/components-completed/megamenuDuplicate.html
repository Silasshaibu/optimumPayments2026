<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Data Driven Mega Menu duplicate</title>
<link rel="stylesheet" href="../assets/css/style-guide.css">

<style>
* { box-sizing: border-box; }


.mega-menu-left > li {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.right-caret-desktop-mega-menu {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  opacity: 0.6;
  transition: transform .25s ease, opacity .25s ease;
}

.mega-menu-left > li:hover .right-caret-desktop-mega-menu {
  opacity: 1;
  transform: translateX(4px);
}



body {
  margin: 0;
  font-family: Arial, sans-serif;
}

/* ================= VARIABLES ================= */
:root {
  --left-width: 390px;
}

/* ================= LAYOUT ================= */
.BigDropDown-Tray {
  display: flex;
  width: 100%;
}


.right-caret-desktop-mega-menu{
  transform: translateY(3px);
}
/* ================= LEFT MENU ================= */
.processingSolutionDropDown-1st-Level {
  width: var(--left-width);
  min-width: var(--left-width);
  background: #333;
  list-style: none;
  margin: 0;
  padding: 0;
}

.BigDropDown-Tray {
  display: none;
}

.BigDropDown-Tray.active {
  display: flex;
}


.processingSolutionDropDown-1st-Level li {
  padding: 15px 30px 15px 20px;
  line-height: 20px;
  color: #fff;
  cursor: pointer;
  border-bottom: 1px solid rgba(255,255,255,0.15);
  display: flex;
  justify-content: space-between;
}

.processingSolutionDropDown-1st-Level li.active,
.processingSolutionDropDown-1st-Level li:hover {
  background: #444;
}

/* ================= GRID ================= */
.grid-space-area {
  width: calc(100vw - var(--left-width));
  padding: 48px 80px;
  padding:2rem 4rem;

  display: grid;
  gap: 30px;
  grid-template-columns: repeat(3, 1fr);

  overflow-y: auto;
  /* background: #b8674a; */
  background-color: #efefef;
  border: 1px solid rgb(187, 187, 187);
}

/* Tablet */
@media (max-width: 1024px) {
  .grid-space-area {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* Mobile */
@media (max-width: 640px) {
  .BigDropDown-Tray {
    flex-direction: column;
  }

  .processingSolutionDropDown-1st-Level {
    width: 100%;
  }

  .grid-space-area {
    width: 100%;
    grid-template-columns: repeat(2, 1fr);
    padding: 32px;
  }
}

/* ================= PRODUCT CARD ================= */
.product-grid-item {
  /* background: #fff; */
  display: flex;
  flex-direction: row; 
  gap: 1rem;
  min-height: fit-content;
  max-height: 150px;
  align-items: flex-start;
}



.product-grid-item:hover{
  text-decoration: none;
}

.product-image {
  width: 100%;
  height:100px;
  aspect-ratio: 1.2;
  object-fit: cover;
  background: #eee;
  flex-basis:25%;
}

.product-details {
  text-align: left;
}

.product-details h3 {
  margin: 0;
  
}

.product-details p {
  margin: 8px 0 0;
  font-size: .9rem;
  
}
</style>

<style>
/* ==========================
   Reset / Base
========================== */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

li {
    list-style: none;
}

a {
    text-decoration: none;
    color: inherit;
}

body {
    font-family: Manrope, sans-serif;
}

/* ==========================
   Variables
========================== */
:root {
    --nav-height: 60px;
    --text-color: #1A1A1A;
    --bg-light: #f3f3f3;
    --active-border: blue;
}

/* ==========================
   Navbar Layout
========================== */
.navbar.header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: var(--nav-height);
    padding: 0 2rem;
    background-color: var(--bg-light);
}

/* ==========================
   Sections
========================== */
.mobile-Section {
    display: none;
}

.LogoSection-with-MoreMobileTemporalButtons {
    display: flex;
    align-items: center;
}

.searchAndstore-NavSection {
    display: flex;
    align-items: center;
    gap: 10px;
}

/* ==========================
   Main Menu
========================== */
.one {
    display: flex;
    gap: 24px;
}

.one > li {
    padding: 18px 0;
    font-size: 14px;
    font-weight: 700;
    color: var(--text-color);
    border-bottom: 3px solid transparent;
    cursor: pointer;
    transition: border-bottom 0.25s ease;
}

.one > li.active {
    border-bottom: 3px solid var(--active-border);
}

/* ==========================
   Icons
========================== */
.icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    transform: translateY(3px);
}

svg {
    width: 100%;
    height: 100%;
}

/* ==========================
   Search
========================== */
.searchFieldBoxAndResults {
    position: absolute;
    top: var(--nav-height);
    right: 0;
    width: 100%;
    background-color: #efefef;
    padding: 1rem;
    display: none;
}

.searchFieldBoxAndResults {
    display: none;
}

.searchFieldBoxAndResults.active {
    display: flex;
}


.searchFieldInput {
    padding: 0.5rem;
    /* border-radius: 6px 0 0 6px; */
    border: 1px solid #ccc;
    border-right:none;
}

.searchButton.Main {
    padding: 0.5rem 1rem;
    border-radius: 6px  0px 0px 6px;
    background-color: #333;
    color: #fff;
    cursor: pointer;
}

.close-searchButton.Main{
    border-radius: 0px  6px 6px 0px;
    background-color: #333;
    /* background-color: #fff; */
}

/* ==========================
   Buttons
========================== */
button {
    cursor: pointer;
    font-weight: 600;
}

.btn-primary {
    padding: 0.5rem 1rem;
}

.btn-primary-sm {
    padding: 0.4rem 0.75rem;
}

/* ==========================
   Responsive
========================== */
@media (max-width: 1200px) {
    .about-us,
    .contact-us,
    .one {
        display: none;
    }

    .mobile-Section {
        display: flex;
    }

    .navbar.header {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        padding: 0 0.5rem;
    }

    .LogoSection-with-MoreMobileTemporalButtons {
        justify-content: center;
    }

    .searchAndstore-NavSection {
        justify-content: flex-end;
    }

    .icon {
        width: 24px;
        height: 24px;
    }
}
</style>

</head>

<body>

<!-- NavBar -->
<nav class="navbar header" role="navigation">

    <!-- Mobile Hamburger -->
    <ul class="mobile-Section">
        <li>
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                          d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
            </span>
        </li>
    </ul>

    <!-- Logo -->
    <ul class="LogoSection-with-MoreMobileTemporalButtons">
        <li class="Logo-Action">
            <a href="#">
                <img src="../assets/images/logo/optimum-navLogo.webp"
                     alt="Optimum Payments"
                     width="120">
            </a>
        </li>
    </ul>

     <!-- Main Menu -->
    <ul class="one mainMenu">
        <li><a href="#">Promo</a></li>
        <li id="processing-btn"><a href="#">Processing Solutions</a></li>
        <li id="financing-btn"><a href="#">Digital Services</a></li>
        <li><a href="#">Business Financing</a></li>
        <li class="about-us"><a href="#">About Us</a></li>
        <li class="contact-us"><a href="#">Contact Us</a></li>
    </ul>

    <!-- Search + Store -->
    <ul class="searchAndstore-NavSection">
        
        <li id="searchSectionMain">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="icon desktop-SearchIcon">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                          d="m21 21-5.197-5.197M15.803 15.803A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                </svg>
            </span>

            <div class="searchFieldBoxAndResults">
                <button class="searchButton Main">Search</button>
                <input class="searchFieldInput" type="text" placeholder="Search...">
                <button class="close-searchButton Main"> 
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="icon close-searchFieldBar">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                    </svg>

                </button>
                
            </div>
        </li>

        <li>
            <button id="shopBtn" class="btn-primary">Shop for Supplies</button>
        </li>
        
    </ul>

   

</nav>


<!-- Processing Solution Mega Menu DropDown Div -->
<div class="BigDropDown-Tray">

  <!-- LEFT MENU -->
  <ul class="processingSolutionDropDown-1st-Level" id="menu"></ul>

  <!-- GRID -->
  <div class="grid-space-area" id="grid"></div>

</div>




<!-- Processing solution Mega Menu Script Start -->
  <script>
  /* ================= DATA ================= */
  const menuData = [
    {
      label: "Full service fine dining",
      products: [
        {
          name: "Union POS",
          description: "Manage order, sales, and payments in one place",
          image: "../../assets/images/products/union-pos.webp",
          href: "#"
        },
        {
          name: "Clover",
          description: "Do what you do better with the world's smartest POS system",
          image: "../assets/images/products/clover-fine-dining.webp",
          href: "#"
        },
        {
          name: "OctoPOS",
          description: "Cloud-based POS and inventory management platform",
          image: "../assets/images/products/octopos.webp",
          href: "#"
        }
      ]
    },

    {
      label: "QSR and Food Trucks",
      products: [
        {
          name: "Clover",
          description: "Fast, flexible POS built for quick service environments",
          image: "../assets/images/products/clover-qsr.webp",
          href: "#"
        },
        {
          name: "Swipe Simple",
          description: "For Food and Beverage merchants",
          image: "../assets/images/products/swipe-simple.webp",
          href: "#"
        },
        {
          name: "Valor",
          description: "Reliable countertop and mobile terminals",
          image: "../assets/images/products/valor.webp",
          href: "#"
        }
      ]
    },

    {
      label: "Bars / Night Clubs / High Volume",
      products: [
        {
          name: "Union POS",
          description: "Fast, flexible POS built for quick service environments",
          image: "../assets/images/products/clover-qsr.webp",
          href: "#"
        }
      
      ]
    },

    {
      label: "Retail / Liquor / Smoke Shops",
      products: [
        {
          name: "OctoPOS",
          description: "Fast, flexible POS built for quick service environments",
          image: "../assets/images/products/clover-qsr.webp",
          href: "#"
        },
        
        {
          name: "Clover",
          description: "Fast, flexible POS built for quick service environments",
          image: "../assets/images/products/clover-qsr.webp",
          href: "#"
        },
        {
          name: "Swipe Simple",
          description: "Fast, flexible POS built for quick service environments",
          image: "../assets/images/products/clover-qsr.webp",
          href: "#"
        }
        ,
        {
          name: "Valor",
          description: "Fast, flexible POS built for quick service environments",
          image: "../assets/images/products/clover-qsr.webp",
          href: "#"
        }
      ]
    },

    {
      label: "Medical",
      products: [
        {
          name: "Practice Management Bridge",
          description:
            "Keeping your patients and your practice healthy requires a partner who understands your needs and technology that simplifies the day-to-day",
          image: "../assets/images/products/practice-bridge.webp",
          href: "#"
        }
      ]
    },

    {
      label: "Contractors / Online Payments / Mobile",
      products: [
        {
          name: "Hyfin",
          description: "Automate your receivables and save time",
          image: "../assets/images/products/hyfin.webp",
          href: "#"
        },
        {
          name: "NMI",
          description: "White Label Payment Gateway Solutions to Boost Your Business",
          image: "../assets/images/products/nmi.webp",
          href: "#"
        },
        {
          name: "Clover",
          description: "White Label Payment Gateway Solutions to Boost Your Business",
          image: "../assets/images/products/nmi.webp",
          href: "#"
        },
        {
          name: "Valor",
          description: "White Label Payment Gateway Solutions to Boost Your Business",
          image: "../assets/images/products/nmi.webp",
          href: "#"
        }
      ]
    },

    {
      label: "Need a Basic Setup?",
      products: [
        {
          name: "Terminal Options",
          description:
            "Used by small businesses across restaurants, retail, and the service industry",
          image: "../assets/images/products/terminal-options.webp",
          href: "#"
        }
      ]
    }
  ];

  /* ================= ELEMENTS ================= */
  const menu = document.getElementById("menu");
  const grid = document.getElementById("grid");

  /* ================= BUILD MENU ================= */
  menuData.forEach((item, index) => {
    const li = document.createElement("li");
    li.textContent = item.label;
    li.dataset.index = index;
    if (index === 0) li.classList.add("active");
    menu.appendChild(li);
  });

  /* ================= HEIGHT CALC ================= */
  function syncGridHeight() {
    const items = menu.querySelectorAll("li");
    if (!items.length) return;

    const style = getComputedStyle(items[0]);

    const singleHeight =
      parseFloat(style.lineHeight) +
      parseFloat(style.paddingTop) +
      parseFloat(style.paddingBottom) +
      parseFloat(style.borderBottomWidth);

    grid.style.maxHeight = (singleHeight * items.length) + "px";
  }

  /* ================= RENDER GRID ================= */
  function renderGrid(index) {
    grid.innerHTML = "";

    menuData[index].products.forEach(product => {
      const card = document.createElement("a");
      card.className = "product-grid-item";
      card.href = product.href;

      card.innerHTML = `
        <img
          class="product-image"
          src="${product.image}"
          alt="${product.name}"
          loading="lazy"
        />

        <div class="product-details">
          <h3>${product.name}</h3>
          <p>${product.description}</p>
        </div>
      `;

      grid.appendChild(card);
    });

    grid.scrollTop = 0;
  }




  

  /* ================= EVENTS ================= */
  menu.addEventListener("mouseenter", e => {
    if (e.target.tagName !== "LI") return;

    menu.querySelectorAll("li").forEach(li => li.classList.remove("active"));
    e.target.classList.add("active");

    renderGrid(e.target.dataset.index);
  }, true);

  /* ================= INIT ================= */
  window.addEventListener("load", () => {
    syncGridHeight();
    renderGrid(0);
  });

  window.addEventListener("resize", syncGridHeight);
  </script>


  <script>
  (function injectMegaMenuCarets() {

    const menuItems = document.querySelectorAll(
      ".processingSolutionDropDown-1st-Level > li"
    );

    if (!menuItems.length) return;

    const svgMarkup = `
      <svg xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="right-caret-desktop-mega-menu"
          aria-hidden="true">
        <path stroke-linecap="round"
              stroke-linejoin="round"
              d="m8.25 4.5 7.5 7.5-7.5 7.5" />
      </svg>
    `;

    menuItems.forEach(li => {
      // Prevent duplicate injection
      if (li.querySelector(".right-caret-desktop-mega-menu")) return;

      li.insertAdjacentHTML("beforeend", svgMarkup);
    });

  })();
  </script>
<!-- Processing Solution Mega Menu Script End -->

<!-- Nav Bar Scripts Start -->
    <script>
    /* ==========================
    Active Nav Item
    ========================== */
    document.addEventListener("DOMContentLoaded", () => {
        const navItems = document.querySelectorAll(".one > li");

        navItems.forEach(item => {
            item.addEventListener("click", () => {
                navItems.forEach(i => i.classList.remove("active"));
                item.classList.add("active");
            });
        });
    });

    /* ==========================
    Mobile Adjustments
    ========================== */
    function updateMobileView() {
        const shopBtn = document.getElementById("shopBtn");
        const searchLi = document.getElementById("searchSectionMain");
        const mobileSection = document.querySelector(".mobile-Section");
        const originalParent = document.querySelector(".searchAndstore-NavSection");

        if (!shopBtn) return;

        if (window.innerWidth <= 1200) {
            shopBtn.textContent = "Store";
            shopBtn.classList.remove("btn-primary");
            shopBtn.classList.add("btn-primary-sm");

            if (searchLi && mobileSection && !mobileSection.contains(searchLi)) {
                mobileSection.appendChild(searchLi);
            }
        } else {
            shopBtn.textContent = "Shop for Supplies";
            shopBtn.classList.remove("btn-primary-sm");
            shopBtn.classList.add("btn-primary");

            if (searchLi && originalParent && !originalParent.contains(searchLi)) {
                originalParent.appendChild(searchLi);
            }
        }
    }

    window.addEventListener("DOMContentLoaded", updateMobileView);
    window.addEventListener("resize", updateMobileView);
    </script>

    <script>
    /* ==========================
    Search Toggle + Outside Click
    ========================== */
    document.addEventListener("DOMContentLoaded", () => {
        const searchIcon = document.querySelector(".desktop-SearchIcon");
        const searchBox = document.querySelector(".searchFieldBoxAndResults");
        const closeBtn = document.querySelector(".close-searchFieldBar");

        if (!searchIcon || !searchBox || !closeBtn) return;

        // Open search
        searchIcon.addEventListener("click", (e) => {
            e.stopPropagation(); // prevent document click
            searchBox.classList.add("active");
        });

        // Close search via close button
        closeBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            searchBox.classList.remove("active");
        });

        // Prevent clicks inside search box from closing it
        searchBox.addEventListener("click", (e) => {
            e.stopPropagation();
        });

        // Click outside closes search
        document.addEventListener("click", () => {
            searchBox.classList.remove("active");
        });
    });
    </script>
<!-- Nav Bar Scripts End -->


<!-- mega menu toggle + outside click start -->
  <script>
  /* ==========================
    Processing Solutions Mega Menu Toggle
  ========================== */
  document.addEventListener("DOMContentLoaded", () => {
      const trigger = document.getElementById("processing-btn");
      const megaMenu = document.querySelector(".BigDropDown-Tray");

      if (!trigger || !megaMenu) return;

      // Toggle mega menu on click
      trigger.addEventListener("click", (e) => {
          e.stopPropagation();

          // toggle active state
          megaMenu.classList.toggle("active");

          // optional: set active state on nav item
          trigger.classList.toggle("active", megaMenu.classList.contains("active"));
      });

      // Prevent clicks inside mega menu from closing it
      megaMenu.addEventListener("click", (e) => {
          e.stopPropagation();
      });

      // Click anywhere outside closes mega menu
      document.addEventListener("click", () => {
          megaMenu.classList.remove("active");
          trigger.classList.remove("active");
      });

      // Optional: close on ESC key
      document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") {
              megaMenu.classList.remove("active");
              trigger.classList.remove("active");
          }
      });
  });
  </script>
<!-- mega menu toggle + outside click end -->

</body>
</html>
